### REST API Tests for TechNest Backend

### Global Variables
@baseUrl = http://localhost:3000
@adminToken = 
@customerToken = 
@userId = 3
@productId = 1
@categoryId = 1
@inventoryId = 1
@cartId = 1
@cartItemId = 1
@orderId = 1
@currencyId = 1
@transactionLogId = 1

### App Controller ###

### Get Hello
GET {{baseUrl}}/ HTTP/1.1

### Authentication Controller ###

### Register User
POST {{baseUrl}}/auth/register HTTP/1.1
Content-Type: application/json

{
  "address": "456 New Ave",
  "email": "customer@example.com",
  "first_name": "New",
  "last_name": "Customer",
  "password": "password",
  "phone_number": "555-555-5555",
  "role": "customer",
  "username": "new_customer"
}

### Login User (admin)
@name loginAdmin
POST {{baseUrl}}/auth/login HTTP/1.1
Content-Type: application/json

{
 "email": "admin@technest.com",
 "password": "password"
}
@adminToken = {{loginAdmin.response.body.accessToken}}

### Login User (customer)
@name loginCustomer
POST {{baseUrl}}/auth/login HTTP/1.1
Content-Type: application/json

{
 "email": "john.doe@email.com",
 "password": "password"
}
@customerToken = {{loginCustomer.response.body.accessToken}}

### Get User Profile (as Admin)
GET {{baseUrl}}/auth/profile HTTP/1.1
Authorization: Bearer {{adminToken}}

### Get User Profile (as Customer)
GET {{baseUrl}}/auth/profile HTTP/1.1
Authorization: Bearer {{customerToken}}

### Products Controller ###

### Get All Products
GET {{baseUrl}}/products HTTP/1.1

### Get Product by ID
GET {{baseUrl}}/products/{{productId}} HTTP/1.1

### Create Product (Admin/Staff only)
POST {{baseUrl}}/products HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{adminToken}}

{
  "brand": "InnovateCo",
  "category_id": 1,
  "description": "A gadget that will change your life.",
  "image_url": "/images/gadget.jpg",
  "name": "New Awesome Gadget",
  "price": 199.99
}

### Update Product (Admin/Staff only)
PATCH {{baseUrl}}/products/{{productId}} HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{adminToken}}

{
  "price": 949.99
}

### Delete Product (Admin only)
DELETE {{baseUrl}}/products/{{productId}} HTTP/1.1
Authorization: Bearer {{adminToken}}

### Users Controller ###

### Get All Users (Admin only)
GET {{baseUrl}}/users HTTP/1.1
Authorization: Bearer {{adminToken}}

### Get User by ID (Admin only)
GET {{baseUrl}}/users/{{userId}} HTTP/1.1
Authorization: Bearer {{adminToken}}

### Create User (Admin only)
POST {{baseUrl}}/users HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{adminToken}}

{
  "address": "789 Other St",
  "email": "another@example.com",
  "first_name": "Another",
  "last_name": "User",
  "password": "password123",
  "phone_number": "321-654-0987",
  "role": "customer",
  "username": "another_user"
}

### Update User (Admin only)
PATCH {{baseUrl}}/users/4 HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{adminToken}}

{
  "phone_number": "111-111-1111"
}

### Delete User (Admin only)
DELETE {{baseUrl}}/users/4 HTTP/1.1
Authorization: Bearer {{adminToken}}

### Categories Controller ###

### Get All Categories
GET {{baseUrl}}/categories HTTP/1.1

### Get Category by ID
GET {{baseUrl}}/categories/{{categoryId}} HTTP/1.1

### Create Category (Admin/Staff only)
POST {{baseUrl}}/categories HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{adminToken}}

{
  "description": "Smartwatches, fitness trackers, and more.",
  "name": "Wearable Tech"
}

### Update Category (Admin/Staff only)
PATCH {{baseUrl}}/categories/{{categoryId}} HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{adminToken}}

{
  "description": "The very latest and greatest smartphones from top brands."
}

### Delete Category (Admin only)
DELETE {{baseUrl}}/categories/5 HTTP/1.1
Authorization: Bearer {{adminToken}}

### Inventory Controller ###

### Get All Inventory (Admin/Staff only)
GET {{baseUrl}}/inventory HTTP/1.1
Authorization: Bearer {{adminToken}}

### Get Inventory by ID (Admin/Staff only)
GET {{baseUrl}}/inventory/{{inventoryId}} HTTP/1.1
Authorization: Bearer {{adminToken}}

### Create Inventory (Admin/Staff only)
POST {{baseUrl}}/inventory HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{adminToken}}

{
  "product_id": 5,
  "stock_quantity": 1000
}

### Update Inventory (Admin/Staff only)
PATCH {{baseUrl}}/inventory/{{inventoryId}} HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{adminToken}}

{
  "stock_quantity": 99
}

### Delete Inventory (Admin only)
DELETE {{baseUrl}}/inventory/{{inventoryId}} HTTP/1.1
Authorization: Bearer {{adminToken}}

### Cart Controller ###

### Get current user's cart
GET {{baseUrl}}/cart HTTP/1.1
Authorization: Bearer {{customerToken}}

### Get All Carts (Admin only)
GET {{baseUrl}}/cart HTTP/1.1
Authorization: Bearer {{adminToken}}

### Get Cart by ID (Owner or Admin/Staff)
GET {{baseUrl}}/cart/{{cartId}} HTTP/1.1
Authorization: Bearer {{customerToken}}

### Create Cart (Authenticated users)
POST {{baseUrl}}/cart HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{customerToken}}

{
  "user_id": 3
}

### Delete Cart (Admin only)
DELETE {{baseUrl}}/cart/{{cartId}} HTTP/1.1
Authorization: Bearer {{adminToken}}

### Cart Items Controller ###

### Add Item to Cart (Owner or Admin/Staff)
POST {{baseUrl}}/cart-items HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{customerToken}}

{
  "cart_id": 1,
  "product_id": 2,
  "quantity": 1
}

### Update Cart Item Quantity (Owner or Admin/Staff)
PATCH {{baseUrl}}/cart-items/{{cartItemId}} HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{customerToken}}

{
  "quantity": 2
}

### Remove Item from Cart (Owner or Admin/Staff)
DELETE {{baseUrl}}/cart-items/2 HTTP/1.1
Authorization: Bearer {{customerToken}}

### Orders Controller ###

### Get User's Order History
GET {{baseUrl}}/orders HTTP/1.1
Authorization: Bearer {{customerToken}}

### Get All Orders (Admin/Staff only)
GET {{baseUrl}}/orders HTTP/1.1
Authorization: Bearer {{adminToken}}

### Get Order by ID (Owner or Admin/Staff)
GET {{baseUrl}}/orders/{{orderId}} HTTP/1.1
Authorization: Bearer {{customerToken}}

### Create Order from Cart (Authenticated users)
POST {{baseUrl}}/orders HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{customerToken}}

{
  "shipping_address": "123 Maple Street, Anytown, USA"
}

### Update Order Status (Admin/Staff only)
PATCH {{baseUrl}}/orders/{{orderId}} HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{adminToken}}

{
  "status": "shipped"
}

### Delete Order (Admin only)
DELETE {{baseUrl}}/orders/{{orderId}} HTTP/1.1
Authorization: Bearer {{adminToken}}

### Transaction Logs Controller ###

### Get All Transaction Logs (Admin only)
GET {{baseUrl}}/transaction-logs HTTP/1.1
Authorization: Bearer {{adminToken}}

### Get Transaction Log by ID (Admin only)
GET {{baseUrl}}/transaction-logs/{{transactionLogId}} HTTP/1.1
Authorization: Bearer {{adminToken}}

### Currencies Controller ###

### Get All Currencies
GET {{baseUrl}}/currencies HTTP/1.1

### Get Currency by ID
GET {{baseUrl}}/currencies/{{currencyId}} HTTP/1.1

### Create Currency (Admin only)
POST {{baseUrl}}/currencies HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{adminToken}}

{
  "currency_code": "JPY",
  "exchange_rate_to_usd": 0.0068,
  "symbol": "Â¥"
}

### Update Currency (Admin only)
PATCH {{baseUrl}}/currencies/{{currencyId}} HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{adminToken}}

{
  "exchange_rate_to_usd": 0.018
}

### Delete Currency (Admin only)
DELETE {{baseUrl}}/currencies/3 HTTP/1.1
Authorization: Bearer {{adminToken}}